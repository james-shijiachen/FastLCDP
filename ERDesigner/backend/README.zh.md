# ERDesigner åç«¯

**ä¸­æ–‡** | [English](README.md)

[![Java](https://img.shields.io/badge/Java-21+-orange.svg)](https://www.oracle.com/java/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.3+-green.svg)](https://spring.io/projects/spring-boot)
[![MyBatis Plus](https://img.shields.io/badge/MyBatis%20Plus-3.5+-blue.svg)](https://baomidou.com/)
[![License: Apache 2.0](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://github.com/james-shijiachen/fastLCDP/blob/main/LICENSE)

## é¡¹ç›®æ¦‚è¿°

ERDesigneråç«¯æ˜¯ä¸€ä¸ªå¼ºå¤§çš„Spring Bootåº”ç”¨ç¨‹åºï¼Œä¸ºERDesignerå‰ç«¯æä¾›å…¨é¢çš„APIæœåŠ¡ã€‚å®ƒå¤„ç†ERå›¾å…ƒæ•°æ®ç®¡ç†ã€DDLç”Ÿæˆã€å¤šæ•°æ®åº“æ”¯æŒï¼Œå¹¶ä¸ºæ•°æ®åº“æ¨¡å¼è®¾è®¡æ“ä½œæä¾›å®Œæ•´çš„REST APIã€‚

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### åŸºç¡€åŠŸèƒ½
- ğŸ—„ï¸ **å…ƒæ•°æ®ç®¡ç†** - å­˜å‚¨å’Œç®¡ç†ERå›¾å…ƒæ•°æ®ï¼Œæ”¯æŒç‰ˆæœ¬æ§åˆ¶
- ğŸ”„ **DDLç”Ÿæˆ** - ä»ERå›¾å®šä¹‰ç”ŸæˆSQL DDLè¯­å¥
- ğŸŒ **å¤šæ•°æ®åº“æ”¯æŒ** - æ”¯æŒH2ã€MySQLã€PostgreSQLã€Oracleå’ŒSQL Server
- ğŸ“Š **æ¨¡å¼éªŒè¯** - éªŒè¯å®ä½“å…³ç³»å’Œæ•°æ®åº“çº¦æŸ
- ğŸ”Œ **REST API** - å…¨é¢çš„RESTful APIæ”¯æŒæ‰€æœ‰æ“ä½œ
- ğŸ“ˆ **è‡ªåŠ¨å»ºè¡¨** - åŸºäºå®ä½“æ³¨è§£è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“è¡¨

### é«˜çº§åŠŸèƒ½
- ğŸ›¡ï¸ **å®‰å…¨æ€§** - Spring Securityé›†æˆï¼Œæ”¯æŒè®¤è¯å’Œæˆæƒ
- ğŸ“ **APIæ–‡æ¡£** - OpenAPI 3.0è§„èŒƒå’ŒSwagger UI
- ğŸ” **å¥åº·ç›‘æ§** - Spring Boot Actuatoråº”ç”¨ç›‘æ§
- ğŸ—ƒï¸ **æ•°æ®åº“è¿ç§»** - è‡ªåŠ¨æ¨¡å¼è¿ç§»å’Œç‰ˆæœ¬ç®¡ç†
- ğŸ¯ **è‡ªå®šä¹‰éªŒè¯** - ERå›¾ä¸€è‡´æ€§çš„ä¸šåŠ¡é€»è¾‘éªŒè¯
- ğŸ“Š **å®¡è®¡æ—¥å¿—** - è·Ÿè¸ªæ‰€æœ‰å˜æ›´å’Œæ“ä½œ

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ¡†æ¶æŠ€æœ¯æ ˆ
- **æ ¸å¿ƒæ¡†æ¶**: Spring Boot 3.3+
- **ç¼–ç¨‹è¯­è¨€**: Java 21 ç°ä»£ç‰¹æ€§
- **æ•°æ®åº“è®¿é—®**: MyBatis Plus 3.5+
- **å®‰å…¨æ¡†æ¶**: Spring Security 6+
- **æ–‡æ¡£ç”Ÿæˆ**: SpringDoc OpenAPI 3
- **ç›‘æ§å·¥å…·**: Spring Boot Actuator
- **æ„å»ºå·¥å…·**: Maven 3.6+

### æ•°æ®åº“æ”¯æŒ
- **H2** - é»˜è®¤åµŒå…¥å¼æ•°æ®åº“ï¼Œç”¨äºå¼€å‘
- **MySQL** - ç”Ÿäº§å°±ç»ªçš„å…³ç³»å‹æ•°æ®åº“
- **PostgreSQL** - é«˜çº§å¼€æºæ•°æ®åº“
- **Oracle** - ä¼ä¸šçº§æ•°æ®åº“è§£å†³æ–¹æ¡ˆ
- **SQL Server** - å¾®è½¯æ•°æ®åº“å¹³å°

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- Java 21+
- Maven 3.6+
- Spring Boot 3.3+
- æ•°æ®åº“ (H2/MySQL/PostgreSQL/Oracle/SQL Server)

## ğŸ—„ï¸ æ•°æ®åº“æ¨¡å¼ä¸XMLé…ç½®

### XMLæ ¼å¼è¯´æ˜

#### åŸºæœ¬ç»“æ„

```xml
<?xml version="1.0" encoding="UTF-8"?>
<database name="æ•°æ®åº“åç§°" version="ç‰ˆæœ¬" charset="å­—ç¬¦é›†" comment="æ•°æ®åº“æ³¨é‡Š">
    <tables>
        <table name="è¡¨å" comment="è¡¨æ³¨é‡Š" engine="å­˜å‚¨å¼•æ“">
            <fields>
                <!-- å­—æ®µå®šä¹‰ -->
            </fields>
            <indexes>
                <!-- ç´¢å¼•å®šä¹‰ -->
            </indexes>
            <relations>
                <!-- å¤–é”®å…³ç³»å®šä¹‰ -->
            </relations>
        </table>
    </tables>
</database>
```

#### å­—æ®µå®šä¹‰

```xml
<field name="å­—æ®µå" 
       type="å­—æ®µç±»å‹" 
       length="é•¿åº¦" 
       scale="å°æ•°ä½æ•°" 
       nullable="æ˜¯å¦å…è®¸ç©º" 
       primaryKey="æ˜¯å¦ä¸»é”®" 
       autoIncrement="æ˜¯å¦è‡ªå¢" 
       defaultValue="é»˜è®¤å€¼" 
       unique="æ˜¯å¦å”¯ä¸€" 
       comment="å­—æ®µæ³¨é‡Š"/>
```

**æ”¯æŒçš„å­—æ®µç±»å‹ï¼š**
- æ•´æ•°ç±»å‹ï¼š`INTEGER`ã€`LONG`
- æµ®ç‚¹ç±»å‹ï¼š`DECIMAL`
- å­—ç¬¦ä¸²ç±»å‹ï¼š`CHAR`ã€`STRING`ã€`TEXT`
- æ—¥æœŸæ—¶é—´ç±»å‹ï¼š`DATETIME`
- äºŒè¿›åˆ¶ç±»å‹ï¼š`BLOB`
- å¸ƒå°”ç±»å‹ï¼š`BOOLEAN`
- JSONç±»å‹ï¼š`JSON`

> æ³¨æ„ï¼šå­—æ®µç±»å‹å¿…é¡»ä¸¥æ ¼éµå¾ªXSD Schemaå®šä¹‰ï¼Œè¯¦è§ `src/main/resources/database-schema.xsd`

#### ç´¢å¼•å®šä¹‰

```xml
<index name="ç´¢å¼•å" type="ç´¢å¼•ç±»å‹" method="ç´¢å¼•æ–¹æ³•" comment="ç´¢å¼•æ³¨é‡Š">
    <columns>
        <column name="å­—æ®µå" order="æ’åºæ–¹å‘" length="ç´¢å¼•é•¿åº¦"/>
    </columns>
</index>
```

**ç´¢å¼•ç±»å‹ï¼š**
- `PRIMARY`ï¼šä¸»é”®ç´¢å¼•
- `UNIQUE`ï¼šå”¯ä¸€ç´¢å¼•
- `NORMAL`ï¼šæ™®é€šç´¢å¼•
- `FULLTEXT`ï¼šå…¨æ–‡ç´¢å¼•
- `SPATIAL`ï¼šç©ºé—´ç´¢å¼•

#### å¤–é”®å…³ç³»

```xml
<relation name="å¤–é”®å" 
          column="æœ¬è¡¨å­—æ®µ" 
          referenceTable="å¼•ç”¨è¡¨" 
          referenceColumn="å¼•ç”¨å­—æ®µ" 
          onDelete="åˆ é™¤åŠ¨ä½œ" 
          onUpdate="æ›´æ–°åŠ¨ä½œ" 
          comment="å…³ç³»æ³¨é‡Š"/>
```

**çº§è”åŠ¨ä½œï¼š**
- `CASCADE`ï¼šçº§è”æ“ä½œ
- `SET NULL`ï¼šè®¾ç½®ä¸ºNULL
- `RESTRICT`ï¼šé™åˆ¶æ“ä½œ
- `NO ACTION`ï¼šæ— åŠ¨ä½œ
- `SET DEFAULT`ï¼šè®¾ç½®ä¸ºé»˜è®¤å€¼

#### è¡¨ç»§æ‰¿

```xml
<table name="å­è¡¨" extends="çˆ¶è¡¨å" comment="ç»§æ‰¿ç¤ºä¾‹">
    <!-- å­è¡¨è‡ªåŠ¨ç»§æ‰¿çˆ¶è¡¨çš„å­—æ®µã€ç´¢å¼•å’Œå…³ç³» -->
    <fields>
        <!-- å¯ä»¥æ·»åŠ å­è¡¨ç‰¹æœ‰å­—æ®µ -->
        <field name="extra_field" type="STRING" length="100" comment="å­è¡¨ç‰¹æœ‰å­—æ®µ"/>
    </fields>
</table>
```

#### XSD SchemaéªŒè¯

é¡¹ç›®æä¾›å®Œæ•´çš„XSD Schemaå®šä¹‰æ–‡ä»¶ `src/main/resources/database-schema.xsd`ï¼Œæ”¯æŒï¼š

- **IDEæ™ºèƒ½æç¤º**ï¼šåœ¨æ”¯æŒXSDçš„IDEä¸­ç¼–å†™XMLæ—¶è·å¾—è‡ªåŠ¨è¡¥å…¨
- **è¯­æ³•éªŒè¯**ï¼šå®æ—¶æ£€æŸ¥XMLé…ç½®è¯­æ³•æ­£ç¡®æ€§
- **ç±»å‹çº¦æŸ**ï¼šç¡®ä¿å­—æ®µç±»å‹ã€ç´¢å¼•ç±»å‹ç­‰ç¬¦åˆè§„èŒƒ

åœ¨XMLæ–‡ä»¶ä¸­å¼•ç”¨XSD Schemaï¼š

```xml
<?xml version="1.0" encoding="UTF-8"?>
<database name="sample_db" version="1.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="../database-schema.xsd">
    <!-- æ•°æ®åº“å®šä¹‰ -->
</database>
```

### ä½¿ç”¨ç¤ºä¾‹

#### 1. å®šä¹‰ç®€å•ç”¨æˆ·è¡¨

```xml
<?xml version="1.0" encoding="UTF-8"?>
<database name="my_app" comment="æˆ‘çš„åº”ç”¨æ•°æ®åº“"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="../database-schema.xsd">
    <tables>
        <table name="user" comment="ç”¨æˆ·è¡¨">
            <fields>
                <field name="id" type="LONG" primaryKey="true" autoIncrement="true" comment="ç”¨æˆ·ID"/>
                <field name="username" type="STRING" length="50" nullable="false" unique="true" comment="ç”¨æˆ·å"/>
                <field name="email" type="STRING" length="100" nullable="false" comment="é‚®ç®±"/>
                <field name="password" type="STRING" length="255" nullable="false" comment="å¯†ç "/>
                <field name="created_at" type="DATETIME" defaultValue="CURRENT_TIMESTAMP" comment="åˆ›å»ºæ—¶é—´"/>
            </fields>
            <indexes>
                <index name="uk_username" type="UNIQUE">
                    <columns>
                        <column name="username"/>
                    </columns>
                </index>
                <index name="idx_email" type="NORMAL">
                    <columns>
                        <column name="email"/>
                    </columns>
                </index>
            </indexes>
        </table>
    </tables>
</database>
```

#### 2. ä½¿ç”¨è¡¨ç»§æ‰¿

```xml
<?xml version="1.0" encoding="UTF-8"?>
<database name="blog_system" charset="utf8mb4" collation="utf8mb4_general_ci"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="../database-schema.xsd">
    <tables>
        <!-- åŸºç¡€å®ä½“è¡¨ -->
        <table name="base_entity" comment="åŸºç¡€å®ä½“è¡¨">
            <fields>
                <field name="id" type="LONG" primaryKey="true" autoIncrement="true" comment="ä¸»é”®ID"/>
                <field name="created_time" type="DATETIME" defaultValue="CURRENT_TIMESTAMP" comment="åˆ›å»ºæ—¶é—´"/>
                <field name="updated_time" type="DATETIME" defaultValue="CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP" comment="æ›´æ–°æ—¶é—´"/>
                <field name="is_deleted" type="BOOLEAN" defaultValue="0" comment="æ˜¯å¦åˆ é™¤"/>
            </fields>
        </table>
        
        <!-- ç”¨æˆ·è¡¨ç»§æ‰¿åŸºç¡€å®ä½“è¡¨ -->
        <table name="user" extends="base_entity" comment="ç”¨æˆ·è¡¨">
            <fields>
                <field name="username" type="STRING" length="50" nullable="false" comment="ç”¨æˆ·å"/>
                <field name="email" type="STRING" length="100" nullable="false" comment="é‚®ç®±"/>
            </fields>
        </table>
        
        <!-- æ–‡ç« è¡¨ä¹Ÿç»§æ‰¿åŸºç¡€å®ä½“è¡¨ -->
        <table name="article" extends="base_entity" comment="æ–‡ç« è¡¨">
            <fields>
                <field name="title" type="STRING" length="200" nullable="false" comment="æ ‡é¢˜"/>
                <field name="content" type="TEXT" comment="å†…å®¹"/>
                <field name="author_id" type="LONG" nullable="false" comment="ä½œè€…ID"/>
            </fields>
            <relations>
                <relation name="fk_article_author" column="author_id" referenceTable="user" referenceColumn="id" onDelete="CASCADE" onUpdate="CASCADE"/>
            </relations>
        </table>
    </tables>
</database>
```

## ğŸ”Œ APIæ¥å£

### ç”Ÿæˆæ•°æ®åº“è¡¨

**POST** `/api/database/generate`

**è¯·æ±‚ä½“ï¼š**
```json
{
  "xmlContent": "XMLå†…å®¹å­—ç¬¦ä¸²",
  "databaseType": "mysql"
}
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "message": "æ•°æ®åº“è¡¨ç”ŸæˆæˆåŠŸ",
  "data": {
    "tablesCreated": 5,
    "indexesCreated": 8,
    "foreignKeysCreated": 3
  }
}
```

### é¢„è§ˆSQLè¯­å¥

**POST** `/api/database/preview`

**è¯·æ±‚ä½“ï¼š**
```json
{
  "xmlContent": "XMLå†…å®¹å­—ç¬¦ä¸²",
  "databaseType": "mysql"
}
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "data": {
    "sqlStatements": [
      "CREATE TABLE user (...)",
      "CREATE INDEX idx_username ON user (username)",
      "ALTER TABLE article ADD CONSTRAINT fk_article_author ..."
    ]
  }
}
```

### éªŒè¯XMLæ ¼å¼

**POST** `/api/database/validate`

**è¯·æ±‚ä½“ï¼š**
```json
{
  "xmlContent": "XMLå†…å®¹å­—ç¬¦ä¸²"
}
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "valid": true,
  "message": "XMLæ ¼å¼æœ‰æ•ˆ"
}
```

### ç³»ç»ŸçŠ¶æ€

**GET** `/api/system/status`

**å“åº”ï¼š**
```json
{
  "status": "UP",
  "database": "Connected",
  "version": "1.0.0",
  "timestamp": "2024-01-01T12:00:00Z"
}
```

## ğŸ“„ ç¤ºä¾‹XMLæ–‡ä»¶

### ç®€å•ç¤ºä¾‹

```xml
<?xml version="1.0" encoding="UTF-8"?>
<database name="simple_blog" version="1.0" charset="utf8mb4" comment="ç®€å•åšå®¢æ•°æ®åº“"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="../database-schema.xsd">
    <tables>
        <table name="user" comment="ç”¨æˆ·è¡¨">
            <fields>
                <field name="id" type="LONG" primaryKey="true" autoIncrement="true" comment="ç”¨æˆ·ID"/>
                <field name="username" type="STRING" length="50" nullable="false" unique="true" comment="ç”¨æˆ·å"/>
                <field name="email" type="STRING" length="100" nullable="false" comment="é‚®ç®±åœ°å€"/>
                <field name="created_at" type="DATETIME" defaultValue="CURRENT_TIMESTAMP" comment="åˆ›å»ºæ—¶é—´"/>
            </fields>
            <indexes>
                <index name="uk_username" type="UNIQUE">
                    <columns>
                        <column name="username"/>
                    </columns>
                </index>
            </indexes>
        </table>
        
        <table name="post" comment="åšå®¢æ–‡ç« è¡¨">
            <fields>
                <field name="id" type="LONG" primaryKey="true" autoIncrement="true" comment="æ–‡ç« ID"/>
                <field name="title" type="STRING" length="200" nullable="false" comment="æ–‡ç« æ ‡é¢˜"/>
                <field name="content" type="TEXT" comment="æ–‡ç« å†…å®¹"/>
                <field name="author_id" type="LONG" nullable="false" comment="ä½œè€…ID"/>
                <field name="created_at" type="DATETIME" defaultValue="CURRENT_TIMESTAMP" comment="åˆ›å»ºæ—¶é—´"/>
            </fields>
            <relations>
                <relation name="fk_post_author" column="author_id" referenceTable="user" referenceColumn="id" onDelete="CASCADE" onUpdate="CASCADE"/>
            </relations>
        </table>
    </tables>
</database>
```

### å®Œæ•´ç¤ºä¾‹

```xml
<?xml version="1.0" encoding="UTF-8"?>
<database name="ecommerce_system" version="2.1" charset="utf8mb4" collation="utf8mb4_general_ci" comment="ç”µå•†ç³»ç»Ÿæ•°æ®åº“"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="../database-schema.xsd">
    <tables>
        <!-- åŸºç¡€å®ä½“è¡¨ -->
        <table name="base_entity" comment="åŸºç¡€å®ä½“è¡¨ï¼ŒåŒ…å«é€šç”¨å­—æ®µ">
            <fields>
                <field name="id" type="LONG" primaryKey="true" autoIncrement="true" comment="ä¸»é”®ID"/>
                <field name="created_time" type="DATETIME" defaultValue="CURRENT_TIMESTAMP" comment="åˆ›å»ºæ—¶é—´"/>
                <field name="updated_time" type="DATETIME" defaultValue="CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP" comment="æœ€åæ›´æ–°æ—¶é—´"/>
                <field name="version" type="INTEGER" defaultValue="0" comment="ä¹è§‚é”ç‰ˆæœ¬å·"/>
                <field name="is_deleted" type="BOOLEAN" defaultValue="0" comment="è½¯åˆ é™¤æ ‡è®°"/>
            </fields>
            <indexes>
                <index name="idx_created_time" type="NORMAL">
                    <columns>
                        <column name="created_time"/>
                    </columns>
                </index>
                <index name="idx_is_deleted" type="NORMAL">
                    <columns>
                        <column name="is_deleted"/>
                    </columns>
                </index>
            </indexes>
        </table>
        
        <!-- ç”¨æˆ·è¡¨ -->
        <table name="user" extends="base_entity" comment="ç”¨æˆ·ä¿¡æ¯è¡¨">
            <fields>
                <field name="username" type="STRING" length="50" nullable="false" unique="true" comment="ç”¨æˆ·å"/>
                <field name="email" type="STRING" length="100" nullable="false" unique="true" comment="é‚®ç®±åœ°å€"/>
                <field name="password_hash" type="STRING" length="255" nullable="false" comment="å¯†ç å“ˆå¸Œ"/>
                <field name="phone" type="STRING" length="20" comment="æ‰‹æœºå·ç "/>
                <field name="avatar_url" type="STRING" length="500" comment="å¤´åƒå›¾ç‰‡URL"/>
                <field name="status" type="STRING" length="20" defaultValue="ACTIVE" comment="ç”¨æˆ·çŠ¶æ€"/>
                <field name="last_login_time" type="DATETIME" comment="æœ€åç™»å½•æ—¶é—´"/>
                <field name="profile" type="JSON" comment="ç”¨æˆ·æ¡£æ¡ˆJSONæ•°æ®"/>
            </fields>
            <indexes>
                <index name="uk_username" type="UNIQUE">
                    <columns>
                        <column name="username"/>
                    </columns>
                </index>
                <index name="uk_email" type="UNIQUE">
                    <columns>
                        <column name="email"/>
                    </columns>
                </index>
                <index name="idx_status" type="NORMAL">
                    <columns>
                        <column name="status"/>
                    </columns>
                </index>
                <index name="idx_last_login" type="NORMAL">
                    <columns>
                        <column name="last_login_time"/>
                    </columns>
                </index>
            </indexes>
        </table>
        
        <!-- å•†å“åˆ†ç±»è¡¨ -->
        <table name="category" extends="base_entity" comment="å•†å“åˆ†ç±»è¡¨">
            <fields>
                <field name="name" type="STRING" length="100" nullable="false" comment="åˆ†ç±»åç§°"/>
                <field name="description" type="TEXT" comment="åˆ†ç±»æè¿°"/>
                <field name="parent_id" type="LONG" comment="çˆ¶åˆ†ç±»ID"/>
                <field name="sort_order" type="INTEGER" defaultValue="0" comment="æ’åºé¡ºåº"/>
                <field name="is_active" type="BOOLEAN" defaultValue="1" comment="æ˜¯å¦æ¿€æ´»"/>
            </fields>
            <indexes>
                <index name="idx_parent_id" type="NORMAL">
                    <columns>
                        <column name="parent_id"/>
                    </columns>
                </index>
                <index name="idx_sort_order" type="NORMAL">
                    <columns>
                        <column name="sort_order"/>
                    </columns>
                </index>
            </indexes>
            <relations>
                <relation name="fk_category_parent" column="parent_id" referenceTable="category" referenceColumn="id" onDelete="SET NULL" onUpdate="CASCADE"/>
            </relations>
        </table>
        
        <!-- å•†å“è¡¨ -->
        <table name="product" extends="base_entity" comment="å•†å“ä¿¡æ¯è¡¨">
            <fields>
                <field name="name" type="STRING" length="200" nullable="false" comment="å•†å“åç§°"/>
                <field name="description" type="TEXT" comment="å•†å“æè¿°"/>
                <field name="sku" type="STRING" length="100" nullable="false" unique="true" comment="å•†å“ç¼–ç "/>
                <field name="price" type="DECIMAL" length="10" scale="2" nullable="false" comment="å•†å“ä»·æ ¼"/>
                <field name="cost" type="DECIMAL" length="10" scale="2" comment="å•†å“æˆæœ¬"/>
                <field name="stock_quantity" type="INTEGER" defaultValue="0" comment="åº“å­˜æ•°é‡"/>
                <field name="category_id" type="LONG" nullable="false" comment="åˆ†ç±»ID"/>
                <field name="brand" type="STRING" length="100" comment="å•†å“å“ç‰Œ"/>
                <field name="weight" type="DECIMAL" length="8" scale="3" comment="å•†å“é‡é‡(kg)"/>
                <field name="dimensions" type="JSON" comment="å•†å“å°ºå¯¸JSON"/>
                <field name="images" type="JSON" comment="å•†å“å›¾ç‰‡JSONæ•°ç»„"/>
                <field name="attributes" type="JSON" comment="å•†å“å±æ€§JSON"/>
                <field name="is_active" type="BOOLEAN" defaultValue="1" comment="æ˜¯å¦æ¿€æ´»"/>
                <field name="featured" type="BOOLEAN" defaultValue="0" comment="æ˜¯å¦æ¨èå•†å“"/>
            </fields>
            <indexes>
                <index name="uk_sku" type="UNIQUE">
                    <columns>
                        <column name="sku"/>
                    </columns>
                </index>
                <index name="idx_category_id" type="NORMAL">
                    <columns>
                        <column name="category_id"/>
                    </columns>
                </index>
                <index name="idx_price" type="NORMAL">
                    <columns>
                        <column name="price"/>
                    </columns>
                </index>
                <index name="idx_brand" type="NORMAL">
                    <columns>
                        <column name="brand"/>
                    </columns>
                </index>
                <index name="idx_is_active_featured" type="NORMAL">
                    <columns>
                        <column name="is_active"/>
                        <column name="featured"/>
                    </columns>
                </index>
                <index name="ft_name_description" type="FULLTEXT">
                    <columns>
                        <column name="name"/>
                        <column name="description"/>
                    </columns>
                </index>
            </indexes>
            <relations>
                <relation name="fk_product_category" column="category_id" referenceTable="category" referenceColumn="id" onDelete="RESTRICT" onUpdate="CASCADE"/>
            </relations>
        </table>
    </tables>
</database>
```

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- Java 21 æˆ–æ›´é«˜ç‰ˆæœ¬
- Maven 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
ERDesigner/backend/
â”œâ”€â”€ src/main/java/
â”‚   â””â”€â”€ com/fastlcdp/erdesigner/
â”‚       â”œâ”€â”€ controller/          # REST APIæ§åˆ¶å™¨
â”‚       â”œâ”€â”€ service/            # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚       â”œâ”€â”€ model/              # æ•°æ®æ¨¡å‹
â”‚       â”œâ”€â”€ parser/             # XMLè§£æå™¨
â”‚       â”œâ”€â”€ generator/          # SQLç”Ÿæˆå™¨
â”‚       â”œâ”€â”€ validator/          # éªŒè¯å™¨
â”‚       â””â”€â”€ config/             # é…ç½®ç±»
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ application.yml         # åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ database-schema.xsd     # XML Schemaå®šä¹‰
â”‚   â””â”€â”€ sql/                    # SQLè„šæœ¬
â”œâ”€â”€ src/test/                   # æµ‹è¯•ä»£ç 
â””â”€â”€ pom.xml                     # Mavené…ç½®
```

### æ‰©å±•å¼€å‘

#### æ·»åŠ æ–°çš„æ•°æ®åº“ç±»å‹

1. åœ¨ `DatabaseType` æšä¸¾ä¸­æ·»åŠ æ–°ç±»å‹ï¼š
```java
public enum DatabaseType {
    MYSQL, POSTGRESQL, ORACLE, SQLSERVER, H2, SQLITE, NEWDB
}
```

2. åˆ›å»ºå¯¹åº”çš„SQLç”Ÿæˆå™¨ï¼š
```java
@Component
public class NewDbSqlGenerator implements SqlGenerator {
    @Override
    public String generateCreateTableSql(Table table) {
        // å®ç°æ–°æ•°æ®åº“çš„å»ºè¡¨SQLç”Ÿæˆé€»è¾‘
    }
}
```

3. åœ¨ `SqlGeneratorFactory` ä¸­æ³¨å†Œï¼š
```java
@Component
public class SqlGeneratorFactory {
    public SqlGenerator getGenerator(DatabaseType type) {
        return switch (type) {
            case NEWDB -> new NewDbSqlGenerator();
            // å…¶ä»–æ•°æ®åº“ç±»å‹...
        };
    }
}
```

#### æ·»åŠ æ–°çš„å­—æ®µç±»å‹

1. åœ¨ `FieldType` æšä¸¾ä¸­æ·»åŠ æ–°ç±»å‹ï¼š
```java
public enum FieldType {
    STRING, INTEGER, LONG, DECIMAL, BOOLEAN, 
    DATETIME, DATE, TIME, TEXT, JSON, BLOB, UUID
}
```

2. æ›´æ–°ç±»å‹æ˜ å°„å™¨ï¼š
```java
@Component
public class TypeMapper {
    public String mapToSqlType(FieldType fieldType, DatabaseType dbType) {
        // æ·»åŠ æ–°å­—æ®µç±»å‹çš„SQLæ˜ å°„é€»è¾‘
    }
}
```

## ğŸ§ª æµ‹è¯•æ–¹æ³•

### å•å…ƒæµ‹è¯•

è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•ï¼š
```bash
mvn test
```

è¿è¡Œç‰¹å®šæµ‹è¯•ç±»ï¼š
```bash
mvn test -Dtest=XmlParserTest
```

### é›†æˆæµ‹è¯•

è¿è¡Œé›†æˆæµ‹è¯•ï¼š
```bash
mvn verify
```

ä½¿ç”¨ç‰¹å®šæ•°æ®åº“è¿›è¡Œæµ‹è¯•ï¼š
```bash
mvn test -Dspring.profiles.active=test-mysql
```

### æµ‹è¯•è¦†ç›–ç‡

ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šï¼š
```bash
mvn jacoco:report
```

æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Šï¼š
```bash
open target/site/jacoco/index.html
```

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•å¤„ç†æ•°æ®åº“å…³é”®å­—å†²çªï¼Ÿ

**A:** ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹å¹¶å¤„ç†å…³é”®å­—å†²çªï¼š

```xml
<!-- ç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºå…³é”®å­—æ·»åŠ åå¼•å·æˆ–æ–¹æ‹¬å· -->
<field name="order" type="STRING" length="50"/>
<!-- ç”Ÿæˆçš„SQL: `order` VARCHAR(50) (MySQL) æˆ– [order] VARCHAR(50) (SQL Server) -->
```

### Q: æ”¯æŒå“ªäº›æ•°æ®åº“ï¼Ÿ

**A:** ç›®å‰æ”¯æŒä»¥ä¸‹æ•°æ®åº“ï¼š
- MySQL 5.7+
- PostgreSQL 10+
- Oracle 11g+
- SQL Server 2012+
- H2 Database
- SQLite 3.0+

### Q: å¦‚ä½•å¤„ç†å¤§å‹XMLæ–‡ä»¶ï¼Ÿ

**A:** å¯¹äºå¤§å‹XMLæ–‡ä»¶ï¼Œå»ºè®®ï¼š

1. ä½¿ç”¨æµå¼è§£æï¼š
```java
@Service
public class StreamingXmlParser {
    public void parseXmlStream(InputStream xmlStream) {
        // ä½¿ç”¨SAXæˆ–StAXè¿›è¡Œæµå¼è§£æ
    }
}
```

2. åˆ†æ‰¹å¤„ç†è¡¨å®šä¹‰ï¼š
```java
@Service
public class BatchTableProcessor {
    @Value("${app.batch.size:100}")
    private int batchSize;
    
    public void processTables(List<Table> tables) {
        // åˆ†æ‰¹å¤„ç†è¡¨å®šä¹‰
    }
}
```

### Q: è¡¨ç»§æ‰¿çš„æœ€å¤§æ·±åº¦æ˜¯å¤šå°‘ï¼Ÿ

**A:** ç†è®ºä¸Šæ²¡æœ‰é™åˆ¶ï¼Œä½†å»ºè®®ä¸è¶…è¿‡5å±‚ï¼Œä»¥é¿å…ï¼š
- æ€§èƒ½é—®é¢˜
- ç»´æŠ¤å¤æ‚æ€§
- å¾ªç¯ç»§æ‰¿æ£€æµ‹å¼€é”€

### Q: å¦‚ä½•å¤‡ä»½ç”Ÿæˆçš„æ•°æ®ï¼Ÿ

**A:** å»ºè®®ä½¿ç”¨æ•°æ®åº“åŸç”Ÿå¤‡ä»½å·¥å…·ï¼š

```bash
# MySQL
mysqldump -u username -p database_name > backup.sql

# PostgreSQL
pg_dump -U username database_name > backup.sql

# SQL Server
sqlcmd -S server -E -Q "BACKUP DATABASE [database_name] TO DISK='backup.bak'"
```

### Q: XSD SchemaéªŒè¯å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**A:** æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

1. XMLå£°æ˜æ˜¯å¦æ­£ç¡®ï¼š
```xml
<?xml version="1.0" encoding="UTF-8"?>
<database xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="../database-schema.xsd">
```

2. å¿…éœ€å±æ€§æ˜¯å¦ç¼ºå¤±ï¼š
```xml
<!-- é”™è¯¯ï¼šç¼ºå°‘nameå±æ€§ -->
<table comment="ç”¨æˆ·è¡¨">

<!-- æ­£ç¡® -->
<table name="user" comment="ç”¨æˆ·è¡¨">
```

3. æ•°æ®ç±»å‹æ˜¯å¦æœ‰æ•ˆï¼š
```xml
<!-- é”™è¯¯ï¼šæ— æ•ˆçš„æ•°æ®ç±»å‹ -->
<field name="id" type="INVALID_TYPE"/>

<!-- æ­£ç¡® -->
<field name="id" type="LONG"/>
```

### Q: å¦‚ä½•åœ¨IDEä¸­è·å¾—XMLæ™ºèƒ½æç¤ºï¼Ÿ

**A:** é…ç½®IDEä½¿ç”¨XSD Schemaï¼š

1. **IntelliJ IDEA:**
   - File â†’ Settings â†’ Languages & Frameworks â†’ Schemas and DTDs
   - æ·»åŠ  `database-schema.xsd` æ–‡ä»¶

2. **Eclipse:**
   - Window â†’ Preferences â†’ XML â†’ XML Catalog
   - æ·»åŠ Schema Locationæ˜ å°„

3. **VS Code:**
   - å®‰è£…XMLæ‰©å±•
   - åœ¨settings.jsonä¸­é…ç½®ï¼š
```json
{
  "xml.catalogs": [
    "path/to/database-schema.xsd"
  ]
}
```

### Q: å¦‚ä½•éªŒè¯XMLé…ç½®çš„æ­£ç¡®æ€§ï¼Ÿ

**A:** ä½¿ç”¨éªŒè¯APIï¼š

```bash
curl -X POST http://localhost:8080/api/database/validate \
  -H "Content-Type: application/json" \
  -d '{"xmlContent": "<?xml version=\"1.0\"?>..."}'
```

æˆ–ä½¿ç”¨åœ¨çº¿éªŒè¯å·¥å…·éªŒè¯XSD Schemaåˆè§„æ€§ã€‚
- æ•°æ®åº“ï¼ˆé»˜è®¤ä½¿ç”¨H2åµŒå…¥å¼æ•°æ®åº“ï¼‰

## ğŸ“Š ç›‘æ§å’Œå¥åº·æ£€æŸ¥

### å¥åº·æ£€æŸ¥ç«¯ç‚¹
- `GET /actuator/health` - åº”ç”¨å¥åº·çŠ¶æ€
- `GET /actuator/info` - åº”ç”¨ä¿¡æ¯
- `GET /actuator/metrics` - åº”ç”¨æŒ‡æ ‡

### æ—¥å¿—è®°å½•
æ—¥å¿—ä½¿ç”¨Log4j2é…ç½®ï¼Œå­˜å‚¨ä½ç½®ï¼š
- å¼€å‘ç¯å¢ƒï¼šæ§åˆ¶å°è¾“å‡º
- æ–‡ä»¶è¾“å‡ºï¼š`logs/erdesigner-backend.log`
- ç”Ÿäº§ç¯å¢ƒï¼šJSONæ ¼å¼

## ğŸ”’ å®‰å…¨æ€§

### è®¤è¯
åº”ç”¨æ”¯æŒå¤šç§è®¤è¯æ–¹å¼ï¼š
- JWTä»¤ç‰Œè®¤è¯
- ä¼šè¯è®¤è¯
- æœåŠ¡é—´è°ƒç”¨çš„APIå¯†é’¥è®¤è¯

### æˆæƒ
åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰ï¼ŒåŒ…å«ä»¥ä¸‹è§’è‰²ï¼š
- `USER` - åŸºæœ¬å›¾è¡¨åˆ›å»ºå’Œç¼–è¾‘
- `ADMIN` - å®Œæ•´ç³»ç»Ÿç®¡ç†
- `VIEWER` - åªè¯»è®¿é—®

---

**ERDesigneråç«¯** æ˜¯ [ERDesigner](../README.md) é¡¹ç›®çš„ä¸€éƒ¨åˆ†ï¼Œéš¶å±äº [FastLCDP](../../README.md) å¹³å°ã€‚